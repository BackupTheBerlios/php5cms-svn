<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

<title>Grid Example</title>
	
<link rel="stylesheet" type="text/css" href="grid.css">

<script language="JavaScript" src="../../../../../../prepend.js"></script>

<script language="JavaScript">

set_library_path( '../../../../../../kernel/js/' );
using( 'gui.grid.lib.Grid' );
using( 'gui.grid.lib.GridRow' );
using( 'gui.grid.lib.GridCell' );

</script>

<script language="JavaScript">

var gridHandler = 
{
	idCounter : 0,
	idPrefix : "grid-",
	all : {},
	getId : function() 
	{ 
		return this.idPrefix + this.idCounter++; 
	},
	scroll : function( id ) 
	{ 
		this.all[id]._scroll(); 
	},
	resize : function( id ) 
	{ 
		this.all[id].calcSize(); 
	},
	click : function() 
	{ 
		var e = Grid.getElement( window.event.srcElement ); 
		
		if ( e ) 
			this.all[e.id].click(); 
	},
	select : function() 
	{
		var e = Grid.getElement( window.event.srcElement );
		
		if ( ( e ) && ( e.tagName == 'TD' ) ) 
		{
			var s = e.parentNode.parentNode.parentNode.parentNode.className;
			
			if ( s == 'gridMain' )
				this.all[e.id].select();
			else if ( s == 'gridMainIdCol' )
				this.all[e.rowid].select( true );
		}
	},
	deselect : function() 
	{ 
		var e = Grid.getElement( window.event.srcElement ); 
		
		if ( ( e ) && ( e.tagName == 'TD' ) && ( this.all[e.id] ) ) 
			this.all[e.id].parent.deselect(); 
	},
	over : function() 
	{ 
		var e = Grid.getElement( window.event.srcElement ); 
		
		if ( ( e ) && ( e.tagName == 'TD' ) && ( this.all[e.id] ) )
			this.all[e.id].parent.over();
	},
	out : function() 
	{ 
		var e = Grid.getElement( window.event.srcElement ); 
		
		if ( ( e ) && ( e.tagName == 'TD' ) && ( this.all[e.id] ) ) 
			this.all[e.id].parent.out();
	},	
	keydown : function() 
	{ 
		var e = Grid.getElement( window.event.srcElement ); 
		
		if ( ( e ) && ( e.tagName == 'TD' ) && ( this.all[e.id] ) ) 
			this.all[e.id].parent.parent._selected._handleKey();
	},
	/*
	select : function() 
	{ 
		return ( window.event.srcElement.tagName == 'INPUT' )? true : false; 
	},
	*/
	boxkey : function() 
	{ 
		return this.all[window.event.srcElement.id]._handleKey(); 
	},
	boxblur : function() 
	{ 
		this.all[window.event.srcElement.id]._blurBox(); 
	},
	sort : function( id, col ) 
	{ 
		this.all[id].sort( col ); 
	},
	headDown : function( e ) 
	{ 
		this.all[e.id]._headDown(); 
	},	
	headUp : function( e ) 
	{ 
		this.all[e.id]._headUp(); 
	},	
	headMove : function( e ) 
	{ 
		this.all[e.id]._headMove(); 
	}
};

</script>	

</head>

<body>

<div style="width: 500px; height: 300px; overflow: hidden; margin-bottom: 6px;">
<script language="JavaScript">

var aData = [['xTree', '1', '1', 'A tree widget'],['xMenu', '1', '2', 'A cross browser menu widget'],['Grid', '1', '1', 'A grid widget'],['Generic Resize', '1', '2', ''],['xTree', '1', '1', 'A tree widget'],['xMenu', '1', '2', 'A cross browser menu widget'],['Grid', '1', '1', 'A grid widget'],['Generic Resize', '1', '2', ''],['xTree', '1', '1', 'A tree widget'],['xMenu', '1', '2', 'A cross browser menu widget'],['Grid', '1', '1', 'A grid widget'],['Generic Resize', '1', '2', ''],['xTree', '1', '1', 'A tree widget'],['xMenu', '1', '2', 'A cross browser menu widget'],['Grid', '1', '1', 'A grid widget'],['Generic Resize', '1', '2', ''],['xTree', '1', '1', 'A tree widget'],['xMenu', '1', '2', 'A cross browser menu widget'],['Grid', '1', '1', 'A grid widget'],['Generic Resize', '1', '2', '']];
var aColHeaders = ['Name', 'Category', 'Author', 'Short Description'];
var aRowIds = [34, 31, 12, 43, 43, 76, 12, 67, 4, 98, 21, 54, 18, 6, 9, 17, 63, 49, 42, 77];
var aLinkData = [[0], [0, [1, 'Widget', 0], [2, 'Javascript technique', 0], [3, 'Mozilla specific', 0]], [0, [1, 'Emil', 0], [2, 'Erik', 0]], [0]];
var oGrid = new Grid( aData );

oGrid.setHeaders( aColHeaders );
oGrid.setRowsServerIds( aRowIds );
oGrid.setLinkData( aLinkData );
oGrid.setUri( 'demo?action=save&' );
document.write( oGrid );
oGrid.calcSize();

</script>
</div>
		
<button onclick="oGrid.setShowSid();">setShowSid()</button>
<button onclick="alert(oGrid.dump());">alert(dump())</button>
<button onclick="alert(oGrid.getGridData());">alert(getGridData())</button>

</body>
</html>
