<?xml version="1.0"?>
<xupdate:modifications version="1.0" xmlns:xupdate="http://www.xmldb.org/xupdate"> 
 <xupdate:insert-after select="/addresses/address[1]" > 
  <xupdate:element name="address">
   <xupdate:attribute name="id">2</xupdate:attribute>
   <fullname>Lars Martin</fullname> 
   <born day='2' month='12' year='1974'/> 
   <town>Leizig</town> 
   <country>Germany</country> 
  </xupdate:element> 
 </xupdate:insert-after>
 <xupdate:update select="/addresses/address[2]/town">New York</xupdate:update>
 <xupdate:remove select="/addresses/address[1]"/> 
 <xupdate:append>
  <xupdate:element name="address"> 
   <xupdate:attribute name="id">2</xupdate:attribute> 
   <xupdate:processing-instruction name="cocoon-process">type="xsp"</xupdate:processing-instruction>
   <xupdate:comment>This element is automatically generated. Do not edit!</xupdate:comment>
  </xupdate:element>
 </xupdate:append>
 <xupdate:update select="/addresses/address[2]/town">New York</xupdate:update> 
 <xupdate:rename select="/addresses/address/town">city</xupdate:rename>
 <xupdate:variable name="town" select="/addresses/address[0]/town"/> 
 <xupdate:append select="/addresses"> 
  <xupdate:element name="address"> 
   <xupdate:value-of select="$town"/> 
  </xupdate:element> 
 </xupdate:append>
</xupdate:modifications>